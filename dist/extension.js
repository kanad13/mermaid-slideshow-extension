(()=>{var t={497(t,n,e){const r=e(398);function i(t){const n=[],e=/```mermaid\s*\n([\s\S]*?)```/g;let r;for(;null!==(r=e.exec(t));){const t=r[1].trim();t&&n.push(t)}const i=/:::\s*mermaid\s*\n([\s\S]*?):::/g;for(;null!==(r=i.exec(t));){const t=r[1].trim();t&&n.push(t)}return n}function o(t,n){t.webview.postMessage({type:"update",diagrams:n})}t.exports={activate:function(t){let n,e;console.log("mermaidSlideshow extension activated");const s=r.commands.registerCommand("mermaidSlideshow.showPreview",function(){const s=r.window.activeTextEditor;if(!s)return void r.window.showErrorMessage("No active editor");const a=s.document;if("markdown"!==a.languageId)return void r.window.showErrorMessage("Not a Markdown file");const d=i(a.getText());if(n)n.reveal(r.ViewColumn.Beside),e=a,o(n,d);else{const i=function(){let t="";for(let n=0;n<32;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}();n=r.window.createWebviewPanel("mermaidSlideshow","Mermaid Slideshow",r.ViewColumn.Beside,{enableScripts:!0,retainContextWhenHidden:!0}),e=a,n.webview.html=function(t,n){if(0===t.length)return`<!DOCTYPE html>\n<html lang="en">\n<head>\n\t<meta charset="UTF-8">\n\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t<meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src 'nonce-${n}'; style-src 'unsafe-inline';">\n\t<title>Mermaid Slideshow</title>\n\t<style>\n\t\tbody {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\theight: 100vh;\n\t\t\tmargin: 0;\n\t\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n\t\t\tcolor: #666;\n\t\t\tbackground: #fff;\n\t\t}\n\t\t.empty { text-align: center; }\n\t\t.empty p { font-size: 1.1em; margin: 8px 0; }\n\t</style>\n</head>\n<body>\n\t<div class="empty">\n\t\t<p>No Mermaid diagrams found in this file.</p>\n\t\t<p style="font-size: 0.85em; color: #999;">Add a \`\`\`mermaid code block to get started.</p>\n\t</div>\n</body>\n</html>`;const e=JSON.stringify(t);return`<!DOCTYPE html>\n<html lang="en">\n<head>\n\t<meta charset="UTF-8">\n\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t<meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src 'nonce-${n}' https://cdn.jsdelivr.net; style-src 'unsafe-inline';">\n\t<title>Mermaid Slideshow</title>\n\t<style>\n\t\t* { box-sizing: border-box; margin: 0; padding: 0; }\n\n\t\tbody {\n\t\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n\t\t\tbackground: #fff;\n\t\t\theight: 100vh;\n\t\t\toverflow: hidden;\n\t\t\tuser-select: none;\n\t\t}\n\n\t\t.slide-container {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\theight: 100vh;\n\t\t\tpadding: 40px 60px;\n\t\t\tposition: relative;\n\t\t}\n\n\t\t.slide-content {\n\t\t\twidth: 100%;\n\t\t\tmax-height: calc(100vh - 120px);\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\toverflow: auto;\n\t\t}\n\n\t\t.slide-content .mermaid {\n\t\t\tbackground: transparent;\n\t\t\tborder: none;\n\t\t\ttext-align: center;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t.slide-content .mermaid svg {\n\t\t\tmax-width: 100%;\n\t\t\tmax-height: calc(100vh - 140px);\n\t\t\theight: auto;\n\t\t}\n\n\t\t/* Slide counter */\n\t\t.slide-counter {\n\t\t\tposition: fixed;\n\t\t\tbottom: 16px;\n\t\t\tright: 20px;\n\t\t\tfont-size: 0.85em;\n\t\t\tcolor: #999;\n\t\t\tbackground: rgba(255, 255, 255, 0.9);\n\t\t\tpadding: 4px 12px;\n\t\t\tborder-radius: 12px;\n\t\t\tborder: 1px solid #e0e0e0;\n\t\t}\n\n\t\t/* Navigation arrows */\n\t\t.nav-arrow {\n\t\t\tposition: fixed;\n\t\t\ttop: 50%;\n\t\t\ttransform: translateY(-50%);\n\t\t\tbackground: transparent;\n\t\t\tborder: 1px solid #d0d0d0;\n\t\t\tcolor: #666;\n\t\t\tfont-size: 1.4em;\n\t\t\twidth: 36px;\n\t\t\theight: 36px;\n\t\t\tborder-radius: 50%;\n\t\t\tcursor: pointer;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\ttransition: background 0.15s ease, border-color 0.15s ease;\n\t\t\tz-index: 10;\n\t\t}\n\n\t\t.nav-arrow:hover {\n\t\t\tbackground: #f5f5f5;\n\t\t\tborder-color: #999;\n\t\t}\n\n\t\t.nav-arrow.prev { left: 10px; }\n\t\t.nav-arrow.next { right: 10px; }\n\n\t\t.nav-arrow:disabled {\n\t\t\topacity: 0.3;\n\t\t\tcursor: default;\n\t\t}\n\n\t\t.nav-arrow:disabled:hover {\n\t\t\tbackground: transparent;\n\t\t\tborder-color: #d0d0d0;\n\t\t}\n\n\t\t/* Hide nav when only one slide */\n\t\t.single-slide .nav-arrow,\n\t\t.single-slide .slide-counter {\n\t\t\tdisplay: none;\n\t\t}\n\t</style>\n</head>\n<body class="${1===t.length?"single-slide":""}">\n\t<button class="nav-arrow prev" aria-label="Previous slide">&#8249;</button>\n\t<button class="nav-arrow next" aria-label="Next slide">&#8250;</button>\n\t<div class="slide-container">\n\t\t<div class="slide-content">\n\t\t\t<pre class="mermaid"></pre>\n\t\t</div>\n\t</div>\n\t<div class="slide-counter"></div>\n\n\t<script type="module" nonce="${n}">\n\t\timport mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';\n\n\t\tconst diagrams = ${e};\n\t\tlet currentIndex = 0;\n\n\t\tmermaid.initialize({\n\t\t\tstartOnLoad: false,\n\t\t\ttheme: 'default',\n\t\t\tsecurityLevel: 'loose'\n\t\t});\n\n\t\tconst container = document.querySelector('.slide-content');\n\t\tconst counter = document.querySelector('.slide-counter');\n\t\tconst prevBtn = document.querySelector('.nav-arrow.prev');\n\t\tconst nextBtn = document.querySelector('.nav-arrow.next');\n\n\t\tasync function renderSlide(index) {\n\t\t\tcurrentIndex = index;\n\n\t\t\t// Clear previous render and create fresh element\n\t\t\tcontainer.innerHTML = '<pre class="mermaid">' + diagrams[currentIndex] + '</pre>';\n\n\t\t\ttry {\n\t\t\t\tawait mermaid.run({ querySelector: '.mermaid' });\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Mermaid rendering failed:', error);\n\t\t\t\tcontainer.innerHTML = '<p style="color: #c00;">Failed to render diagram ' + (currentIndex + 1) + '</p>';\n\t\t\t}\n\n\t\t\tcounter.textContent = (currentIndex + 1) + ' / ' + diagrams.length;\n\t\t\tprevBtn.disabled = currentIndex === 0;\n\t\t\tnextBtn.disabled = currentIndex === diagrams.length - 1;\n\t\t}\n\n\t\tfunction goNext() {\n\t\t\tif (currentIndex < diagrams.length - 1) {\n\t\t\t\trenderSlide(currentIndex + 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction goPrev() {\n\t\t\tif (currentIndex > 0) {\n\t\t\t\trenderSlide(currentIndex - 1);\n\t\t\t}\n\t\t}\n\n\t\t// Keyboard navigation\n\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\tif (e.key === 'ArrowRight' || e.key === 'ArrowDown') {\n\t\t\t\te.preventDefault();\n\t\t\t\tgoNext();\n\t\t\t} else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {\n\t\t\t\te.preventDefault();\n\t\t\t\tgoPrev();\n\t\t\t}\n\t\t});\n\n\t\t// Mouse scroll navigation (debounced to prevent rapid firing)\n\t\tlet scrollCooldown = false;\n\t\tdocument.addEventListener('wheel', (e) => {\n\t\t\tif (scrollCooldown) return;\n\t\t\tscrollCooldown = true;\n\t\t\tsetTimeout(() => { scrollCooldown = false; }, 300);\n\n\t\t\tif (e.deltaY > 0) {\n\t\t\t\tgoNext();\n\t\t\t} else if (e.deltaY < 0) {\n\t\t\t\tgoPrev();\n\t\t\t}\n\t\t});\n\n\t\t// Click navigation\n\t\tprevBtn.addEventListener('click', goPrev);\n\t\tnextBtn.addEventListener('click', goNext);\n\n\t\t// Listen for messages from the extension (live updates)\n\t\twindow.addEventListener('message', (event) => {\n\t\t\tconst message = event.data;\n\t\t\tif (message.type === 'update') {\n\t\t\t\tdiagrams.length = 0;\n\t\t\t\tdiagrams.push(...message.diagrams);\n\n\t\t\t\tif (diagrams.length === 0) {\n\t\t\t\t\tcontainer.innerHTML = '<p style="color: #666;">No Mermaid diagrams found.</p>';\n\t\t\t\t\tcounter.textContent = '';\n\t\t\t\t\tdocument.body.classList.add('single-slide');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdocument.body.classList.toggle('single-slide', diagrams.length === 1);\n\n\t\t\t\t// Clamp current index if diagrams were removed\n\t\t\t\tconst newIndex = Math.min(currentIndex, diagrams.length - 1);\n\t\t\t\trenderSlide(newIndex);\n\t\t\t}\n\t\t});\n\n\t\t// Render first slide\n\t\trenderSlide(0);\n\t<\/script>\n</body>\n</html>`}(d,i),n.onDidDispose(()=>{n=void 0,e=void 0},null,t.subscriptions)}}),a=r.workspace.onDidChangeTextDocument(t=>{if(n&&e&&t.document.uri.toString()===e.uri.toString()){const e=i(t.document.getText());o(n,e)}});t.subscriptions.push(s),t.subscriptions.push(a)},deactivate:function(){}}},398(t){"use strict";t.exports=require("vscode")}},n={},e=function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return t[r](o,o.exports,e),o.exports}(497);module.exports=e})();
//# sourceMappingURL=extension.js.map